!function(a){"function"==typeof define&&define.amd?define("datepicker",["jquery"],a):a("object"==typeof exports?require("jquery"):jQuery)}(function(a){"use strict";function b(a){return K.call(a).slice(8,-1).toLowerCase()}function c(a){return"string"==typeof a}function d(a){return"number"==typeof a&&!isNaN(a)}function e(a){return"undefined"==typeof a}function f(a){return"date"===b(a)}function g(a,b){var c=[];return Array.from?Array.from(a).slice(b||0):(d(b)&&c.push(b),c.slice.apply(a,c))}function h(a,b){var c=g(arguments,2);return function(){return a.apply(b,c.concat(g(arguments)))}}function i(a){return a%4===0&&a%100!==0||a%400===0}function j(a,b){return[31,i(a)?29:28,31,30,31,30,31,31,30,31,30,31][b]}function k(a){var b,c,d=String(a).toLowerCase(),e=d.match(y);if(!e||0===e.length)throw new Error("Invalid date format.");for(a={source:d,parts:e},b=e.length,c=0;c<b;c++)switch(e[c]){case"dd":case"d":a.hasDay=!0;break;case"mm":case"m":a.hasMonth=!0;break;case"yyyy":case"yy":a.hasYear=!0}return a}function l(b,c){c=a.isPlainObject(c)?c:{},c.language&&(c=a.extend({},l.LANGUAGES[c.language],c)),this.$element=a(b),this.options=a.extend({},l.DEFAULTS,c),this.isBuilt=!1,this.isShown=!1,this.isInput=!1,this.isInline=!1,this.initialValue="",this.initialDate=null,this.startDate=null,this.endDate=null,this.init()}var m=a(window),n=window.document,o=a(n),p=window.Number,q="datepicker",r="click."+q,s="keyup."+q,t="focus."+q,u="resize."+q,v="show."+q,w="hide."+q,x="pick."+q,y=/(y|m|d)+/g,z=/\d+/g,A=/^\d{2,4}$/,B=q+"-inline",C=q+"-dropdown",D=q+"-top-left",E=q+"-top-right",F=q+"-bottom-left",G=q+"-bottom-right",H=[D,E,F,G].join(" "),I=q+"-hide",J=Math.min,K=Object.prototype.toString;l.prototype={constructor:l,init:function(){var b=this.options,c=this.$element,d=b.startDate,e=b.endDate,f=b.date;this.$trigger=a(b.trigger||c),this.isInput=c.is("input")||c.is("textarea"),this.isInline=b.inline&&(b.container||!this.isInput),this.format=k(b.format),this.initialValue=this.getValue(),f=this.parseDate(f||this.initialValue),d&&(d=this.parseDate(d),f.getTime()<d.getTime()&&(f=new Date(d)),this.startDate=d),e&&(e=this.parseDate(e),d&&e.getTime()<d.getTime()&&(e=new Date(d)),f.getTime()>e.getTime()&&(f=new Date(e)),this.endDate=e),this.date=f,this.viewDate=new Date(f),this.initialDate=new Date(this.date),this.bind(),(b.autoshow||this.isInline)&&this.show(),b.autopick&&this.pick()},build:function(){var b,c=this.options,d=this.$element;this.isBuilt||(this.isBuilt=!0,this.$picker=b=a(c.template),this.$week=b.find('[data-view="week"]'),this.$yearsPicker=b.find('[data-view="years picker"]'),this.$yearsPrev=b.find('[data-view="years prev"]'),this.$yearsNext=b.find('[data-view="years next"]'),this.$yearsCurrent=b.find('[data-view="years current"]'),this.$years=b.find('[data-view="years"]'),this.$monthsPicker=b.find('[data-view="months picker"]'),this.$yearPrev=b.find('[data-view="year prev"]'),this.$yearNext=b.find('[data-view="year next"]'),this.$yearCurrent=b.find('[data-view="year current"]'),this.$months=b.find('[data-view="months"]'),this.$daysPicker=b.find('[data-view="days picker"]'),this.$monthPrev=b.find('[data-view="month prev"]'),this.$monthNext=b.find('[data-view="month next"]'),this.$monthCurrent=b.find('[data-view="month current"]'),this.$days=b.find('[data-view="days"]'),this.isInline?a(c.container||d).append(b.addClass(B)):(a(n.body).append(b.addClass(C)),b.addClass(I)),this.fillWeek())},unbuild:function(){this.isBuilt&&(this.isBuilt=!1,this.$picker.remove())},bind:function(){var b=this.options,c=this.$element;a.isFunction(b.show)&&c.on(v,b.show),a.isFunction(b.hide)&&c.on(w,b.hide),a.isFunction(b.pick)&&c.on(x,b.pick),this.isInput&&(c.on(s,a.proxy(this.keyup,this)),b.trigger||c.on(t,a.proxy(this.show,this))),this.$trigger.on(r,a.proxy(this.show,this))},unbind:function(){var b=this.options,c=this.$element;a.isFunction(b.show)&&c.off(v,b.show),a.isFunction(b.hide)&&c.off(w,b.hide),a.isFunction(b.pick)&&c.off(x,b.pick),this.isInput&&(c.off(s,this.keyup),b.trigger||c.off(t,this.show)),this.$trigger.off(r,this.show)},showView:function(a){var b=this.$yearsPicker,c=this.$monthsPicker,d=this.$daysPicker,e=this.format;if(e.hasYear||e.hasMonth||e.hasDay)switch(p(a)){case 2:case"years":c.addClass(I),d.addClass(I),e.hasYear?(this.fillYears(),b.removeClass(I)):this.showView(0);break;case 1:case"months":b.addClass(I),d.addClass(I),e.hasMonth?(this.fillMonths(),c.removeClass(I)):this.showView(2);break;default:b.addClass(I),c.addClass(I),e.hasDay?(this.fillDays(),d.removeClass(I)):this.showView(1)}},hideView:function(){this.options.autohide&&this.hide()},place:function(){var a=this.options,b=this.$element,c=this.$picker,d=o.outerWidth(),e=o.outerHeight(),f=b.outerWidth(),g=b.outerHeight(),h=c.width(),i=c.height(),j=b.offset(),k=j.left,l=j.top,m=parseFloat(a.offset)||10,n=D;l>i&&l+g+i>e?(l-=i+m,n=F):l+=g+m,k+h>d&&(k=k+f-h,n=n.replace("left","right")),c.removeClass(H).addClass(n).css({top:l,left:k,zIndex:parseInt(a.zIndex,10)})},trigger:function(b,c){var d=a.Event(b,c);return this.$element.trigger(d),d},createItem:function(b){var c=this.options,d=c.itemTag,e={text:"",view:"",muted:!1,picked:!1,disabled:!1};return a.extend(e,b),"<"+d+" "+(e.disabled?'class="'+c.disabledClass+'"':e.picked?'class="'+c.pickedClass+'"':e.muted?'class="'+c.mutedClass+'"':"")+(e.view?' data-view="'+e.view+'"':"")+">"+e.text+"</"+d+">"},fillAll:function(){this.fillYears(),this.fillMonths(),this.fillDays()},fillWeek:function(){var b,c=this.options,d=parseInt(c.weekStart,10)%7,e=c.daysMin,f="";for(e=a.merge(e.slice(d),e.slice(0,d)),b=0;b<=6;b++)f+=this.createItem({text:e[b]});this.$week.html(f)},fillYears:function(){var b,c=this.options,d=c.disabledClass||"",e=c.yearSuffix||"",f=a.isFunction(c.filter)&&c.filter,g=this.startDate,h=this.endDate,i=this.viewDate,j=i.getFullYear(),k=i.getMonth(),l=i.getDate(),m=this.date,n=m.getFullYear(),o=!1,p=!1,q=!1,r=!1,s=!1,t="",u=-5,v=6;for(b=u;b<=v;b++)m=new Date(j+b,k,l),s=b===u||b===v,r=j+b===n,q=!1,g&&(q=m.getFullYear()<g.getFullYear(),b===u&&(o=q)),!q&&h&&(q=m.getFullYear()>h.getFullYear(),b===v&&(p=q)),!q&&f&&(q=f.call(this.$element,m)===!1),t+=this.createItem({text:j+b,view:q?"year disabled":r?"year picked":"year",muted:s,picked:r,disabled:q});this.$yearsPrev.toggleClass(d,o),this.$yearsNext.toggleClass(d,p),this.$yearsCurrent.toggleClass(d,!0).html(j+u+e+" - "+(j+v)+e),this.$years.html(t)},fillMonths:function(){var b,c=this.options,d=c.disabledClass||"",e=c.monthsShort,f=a.isFunction(c.filter)&&c.filter,g=this.startDate,h=this.endDate,i=this.viewDate,j=i.getFullYear(),k=i.getDate(),l=this.date,m=l.getFullYear(),n=l.getMonth(),o=!1,p=!1,q=!1,r=!1,s="";for(b=0;b<=11;b++)l=new Date(j,b,k),r=j===m&&b===n,q=!1,g&&(o=l.getFullYear()===g.getFullYear(),q=o&&l.getMonth()<g.getMonth()),!q&&h&&(p=l.getFullYear()===h.getFullYear(),q=p&&l.getMonth()>h.getMonth()),!q&&f&&(q=f.call(this.$element,l)===!1),s+=this.createItem({index:b,text:e[b],view:q?"month disabled":r?"month picked":"month",picked:r,disabled:q});this.$yearPrev.toggleClass(d,o),this.$yearNext.toggleClass(d,p),this.$yearCurrent.toggleClass(d,o&&p).html(j+c.yearSuffix||""),this.$months.html(s)},fillDays:function(){var b,c,d,e=this.options,f=e.disabledClass||"",g=e.yearSuffix||"",h=e.monthsShort,i=parseInt(e.weekStart,10)%7,k=a.isFunction(e.filter)&&e.filter,l=this.startDate,m=this.endDate,n=this.viewDate,o=n.getFullYear(),p=n.getMonth(),q=o,r=p,s=o,t=p,u=this.date,v=u.getFullYear(),w=u.getMonth(),x=u.getDate(),y=!1,z=!1,A=!1,B=!1,C=[],D=[],E=[],F=42;for(0===p?(q-=1,r=11):r-=1,b=j(q,r),u=new Date(o,p,1),d=u.getDay()-i,d<=0&&(d+=7),l&&(y=u.getTime()<=l.getTime()),c=b-(d-1);c<=b;c++)u=new Date(q,r,c),A=!1,l&&(A=u.getTime()<l.getTime()),!A&&k&&(A=k.call(this.$element,u)===!1),C.push(this.createItem({text:c,view:"day prev",muted:!0,disabled:A}));for(11===p?(s+=1,t=0):t+=1,b=j(o,p),d=F-(C.length+b),u=new Date(o,p,b),m&&(z=u.getTime()>=m.getTime()),c=1;c<=d;c++)u=new Date(s,t,c),A=!1,m&&(A=u.getTime()>m.getTime()),!A&&k&&(A=k.call(this.$element,u)===!1),D.push(this.createItem({text:c,view:"day next",muted:!0,disabled:A}));for(c=1;c<=b;c++)u=new Date(o,p,c),B=o===v&&p===w&&c===x,A=!1,l&&(A=u.getTime()<l.getTime()),!A&&m&&(A=u.getTime()>m.getTime()),!A&&k&&(A=k.call(this.$element,u)===!1),E.push(this.createItem({text:c,view:A?"day disabled":B?"day picked":"day",picked:B,disabled:A}));this.$monthPrev.toggleClass(f,y),this.$monthNext.toggleClass(f,z),this.$monthCurrent.toggleClass(f,y&&z).html(e.yearFirst?o+g+" "+h[p]:h[p]+" "+o+g),this.$days.html(C.join("")+E.join(" ")+D.join(""))},click:function(b){var c,d,e,f,g,h,i=a(b.target),j=this.viewDate;if(b.stopPropagation(),b.preventDefault(),!i.hasClass("disabled"))switch(c=j.getFullYear(),d=j.getMonth(),e=j.getDate(),h=i.data("view")){case"years prev":case"years next":c="years prev"===h?c-10:c+10,g=i.text(),f=A.test(g),f&&(c=parseInt(g,10),this.date=new Date(c,d,J(e,28))),this.viewDate=new Date(c,d,J(e,28)),this.fillYears(),f&&(this.showView(1),this.pick("year"));break;case"year prev":case"year next":c="year prev"===h?c-1:c+1,this.viewDate=new Date(c,d,J(e,28)),this.fillMonths();break;case"year current":this.format.hasYear&&this.showView(2);break;case"year picked":this.format.hasMonth?this.showView(1):this.hideView();break;case"year":c=parseInt(i.text(),10),this.date=new Date(c,d,J(e,28)),this.viewDate=new Date(c,d,J(e,28)),this.format.hasMonth?this.showView(1):this.hideView(),this.pick("year");break;case"month prev":case"month next":d="month prev"===h?d-1:"month next"===h?d+1:d,this.viewDate=new Date(c,d,J(e,28)),this.fillDays();break;case"month current":this.format.hasMonth&&this.showView(1);break;case"month picked":this.format.hasDay?this.showView(0):this.hideView();break;case"month":d=a.inArray(i.text(),this.options.monthsShort),this.date=new Date(c,d,J(e,28)),this.viewDate=new Date(c,d,J(e,28)),this.format.hasDay?this.showView(0):this.hideView(),this.pick("month");break;case"day prev":case"day next":case"day":d="day prev"===h?d-1:"day next"===h?d+1:d,e=parseInt(i.text(),10),this.date=new Date(c,d,e),this.viewDate=new Date(c,d,e),this.fillDays(),"day"===h&&this.hideView(),this.pick("day");break;case"day picked":this.hideView(),this.pick("day")}},clickDoc:function(a){for(var b,c=a.target,d=this.$trigger[0];c!==n;){if(c===d){b=!0;break}c=c.parentNode}b||this.hide()},keyup:function(){this.update()},getValue:function(){var a=this.$element,b="";return this.isInput?b=a.val():this.isInline?this.options.container&&(b=a.text()):b=a.text(),b},setValue:function(a){var b=this.$element;a=c(a)?a:"",this.isInput?b.val(a):this.isInline?this.options.container&&b.text(a):b.text(a)},show:function(){this.isBuilt||this.build(),this.isShown||this.trigger(v).isDefaultPrevented()||(this.isShown=!0,this.$picker.removeClass(I).on(r,a.proxy(this.click,this)),this.showView(this.options.startView),this.isInline||(m.on(u,this._place=h(this.place,this)),o.on(r,this._clickDoc=h(this.clickDoc,this)),this.place()))},hide:function(){this.isShown&&(this.trigger(w).isDefaultPrevented()||(this.isShown=!1,this.$picker.addClass(I).off(r,this.click),this.isInline||(m.off(u,this._place),o.off(r,this._clickDoc))))},update:function(){this.setDate(this.getValue(),!0)},pick:function(a){var b=this.$element,c=this.date;this.trigger(x,{view:a||"",date:c}).isDefaultPrevented()||(this.setValue(c=this.formatDate(this.date)),this.isInput&&b.trigger("change"))},reset:function(){this.setDate(this.initialDate,!0),this.setValue(this.initialValue),this.isShown&&this.showView(this.options.startView)},getMonthName:function(b,c){var f=this.options,g=f.months;return a.isNumeric(b)?b=p(b):e(c)&&(c=b),c===!0&&(g=f.monthsShort),g[d(b)?b:this.date.getMonth()]},getDayName:function(b,c,f){var g=this.options,h=g.days;return a.isNumeric(b)?b=p(b):(e(f)&&(f=c),e(c)&&(c=b)),h=f===!0?g.daysMin:c===!0?g.daysShort:h,h[d(b)?b:this.date.getDay()]},getDate:function(a){var b=this.date;return a?this.formatDate(b):new Date(b)},setDate:function(b,d){var e=this.options.filter;if(f(b)||c(b)){if(b=this.parseDate(b),a.isFunction(e)&&e.call(this.$element,b)===!1)return;this.date=b,this.viewDate=new Date(b),d||this.pick(),this.isBuilt&&this.fillAll()}},setStartDate:function(a){(f(a)||c(a))&&(this.startDate=this.parseDate(a),this.isBuilt&&this.fillAll())},setEndDate:function(a){(f(a)||c(a))&&(this.endDate=this.parseDate(a),this.isBuilt&&this.fillAll())},parseDate:function(a){var b,d,e,g,h,i,j=this.format,k=[];if(f(a))return new Date(a.getFullYear(),a.getMonth(),a.getDate());if(c(a)&&(k=a.match(z)||[]),a=new Date,d=a.getFullYear(),e=a.getDate(),g=a.getMonth(),b=j.parts.length,k.length===b)for(i=0;i<b;i++)switch(h=parseInt(k[i],10)||1,j.parts[i]){case"dd":case"d":e=h;break;case"mm":case"m":g=h-1;break;case"yy":d=2e3+h;break;case"yyyy":d=h}return new Date(d,g,e)},formatDate:function(a){var b,c,d,e,g,h=this.format,i="";if(f(a))for(i=h.source,c=a.getFullYear(),e={d:a.getDate(),m:a.getMonth()+1,yy:c.toString().substring(2),yyyy:c},e.dd=(e.d<10?"0":"")+e.d,e.mm=(e.m<10?"0":"")+e.m,b=h.parts.length,g=0;g<b;g++)d=h.parts[g],i=i.replace(d,e[d]);return i},destroy:function(){this.unbind(),this.unbuild(),this.$element.removeData(q)}},l.LANGUAGES={},l.DEFAULTS={autoshow:!1,autohide:!1,autopick:!1,inline:!1,container:null,trigger:null,language:"",format:"mm/dd/yyyy",date:null,startDate:null,endDate:null,startView:0,weekStart:0,yearFirst:!1,yearSuffix:"",days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],daysShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],daysMin:["Su","Mo","Tu","We","Th","Fr","Sa"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],monthsShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],itemTag:"li",mutedClass:"muted",pickedClass:"picked",disabledClass:"disabled",template:'<div class="datepicker-container"><div class="datepicker-panel" data-view="years picker"><ul><li data-view="years prev">&lsaquo;</li><li data-view="years current"></li><li data-view="years next">&rsaquo;</li></ul><ul data-view="years"></ul></div><div class="datepicker-panel" data-view="months picker"><ul><li data-view="year prev">&lsaquo;</li><li data-view="year current"></li><li data-view="year next">&rsaquo;</li></ul><ul data-view="months"></ul></div><div class="datepicker-panel" data-view="days picker"><ul><li data-view="month prev">&lsaquo;</li><li data-view="month current"></li><li data-view="month next">&rsaquo;</li></ul><ul data-view="week"></ul><ul data-view="days"></ul></div></div>',offset:10,zIndex:1e3,filter:null,show:null,hide:null,pick:null},l.setDefaults=function(b){a.extend(l.DEFAULTS,a.isPlainObject(b)&&b)},l.other=a.fn.datepicker,a.fn.datepicker=function(b){var d,f=g(arguments,1);return this.each(function(){var e,g,h=a(this),i=h.data(q);if(!i){if(/destroy/.test(b))return;e=a.extend({},h.data(),a.isPlainObject(b)&&b),h.data(q,i=new l(this,e))}c(b)&&a.isFunction(g=i[b])&&(d=g.apply(i,f))}),e(d)?this:d},a.fn.datepicker.Constructor=l,a.fn.datepicker.languages=l.LANGUAGES,a.fn.datepicker.setDefaults=l.setDefaults,a.fn.datepicker.noConflict=function(){return a.fn.datepicker=l.other,this}});